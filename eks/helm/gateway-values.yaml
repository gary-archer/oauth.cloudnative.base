##############################################################################################
# Configure the load balancer to use TLS passthrough to NGINX
# The AWS load balancer controller applies the annotations to the AWS load balancer
# - https://medium.com/@silverdagger/nginx-ingress-controller-with-nlb-in-aws-eks-b5fe81c12e00
##############################################################################################
controller:
  replicaCount: 2
  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"
      service.beta.kubernetes.io/aws-load-balancer-type: "external"
      service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
      service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing
      service.beta.kubernetes.io/aws-load-balancer-backend-protocol: tcp

  config:
    use-proxy-protocol: "true"
    real-ip-header: "proxy_protocol"
    use-forwarded-headers: "true"
